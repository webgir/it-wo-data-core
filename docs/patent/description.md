Сущность изобретения

Предлагаемый способ обеспечивает детерминированную и устойчивую обработку структурированных данных за счёт выполнения последовательности операций, включающих многоуровневую валидацию, предиктивный анализ целостности, формирование снимков состояния данных, вычисление изменений между версиями, автоматическое создание журналов изменений, выполнение восстановительных операций и ведение распределённого согласованного состояния системы.

Способ реализован в виде последовательности шагов, выполняемых вычислительной системой, включающих:





приём и нормализацию входных данных из одного или нескольких внешних источников;





преобразование входных данных в структурированный набор объектов согласно предопределённым контрактам данных;





выполнение многоуровневой валидации, включающей структурную, типовую, контекстную, межобъектную и обратную совместимость с предыдущими версиями;





выполнение предиктивного анализа целостности для обнаружения аномалий данных до формирования снимка версии;





формирование снимка состояния данных (snapshot), включающего сохранение полного набора объектов и метаданных версии;





вычисление отличий между текущим снимком и предыдущими снимками, включая добавления, удаления, изменения и нарушения обратной совместимости;





автоматическое создание журнала изменений (changelog) в человекочитаемом и машинном форматах;





выполнение восстановительных операций (recovery), включая откат к предыдущим снимкам и восстановление корректности структуры данных;





ведение распределённого согласованного состояния системы, включая выбор ведущего узла, обмен heartbeat-сообщениями, блокировки ресурсов, разрешение конфликтов и синхронизацию версий;





предоставление актуального набора данных во внешние системы в виде программного API в соответствии с контрактами данных.







Технический результат

Техническим результатом является повышение устойчивости и предсказуемости обработки данных, обеспечение строгой целостности структурированных наборов данных, предотвращение скрытых ошибок на ранних этапах, детерминированность итогового состояния после каждого цикла обработки, улучшение наблюдаемости изменений, повышение точности восстановления состояния и обеспечение корректной работы системы в распределённой среде.



Подробное описание реализации способа



Способ управления структурированной системой данных IWDC реализуется вычислительной системой, содержащей одно или несколько аппаратных устройств обработки данных. Все этапы способа выполняются программно, последовательность операций является детерминированной и воспроизводимой при каждом запуске.



1. Приём и нормализация входных данных



На первом этапе система принимает один или несколько входных файлов, содержащих исходные данные. Эти данные могут быть представлены в различных форматах, включая таблицы, электронные таблицы, CSV-структуры и другие типы структурированной информации.



Система выполняет нормализацию входных данных, приводя их к унифицированной форме, пригодной для дальнейшей обработки. На этом этапе выполняется очистка, фильтрация, устранение дубликатов и преобразование форматов.



2. Преобразование данных в структурированные объекты



После нормализации данные преобразуются в набор объектов, соответствующих контрактам данных системы. Контракты представляют собой строго определённые схемы структур, включающие идентификаторы, обязательные атрибуты, типы данных, связи между объектами и метаданные.



Каждый объект создаётся в соответствии с предопределённой JSON-схемой, обеспечивая единообразие всех сущностей и корректность дальнейшей валидации.



3. Многоуровневая валидация данных



Система выполняет несколько последовательных уровней проверки данных:



Структурная валидация. Проверяется соответствие объектов схемам данных, включая наличие обязательных полей и типы значений.



Контекстная валидация. Проверяются связи между объектами, включая соответствие идентификаторов, референсов, вложенных структур и зависимостей.



Логическая валидация. Анализируются значения полей и их соответствие допустимым диапазонам, форматам и правилам.



Валидация обратной совместимости. Система сравнивает текущие данные с предыдущей стабильной версией для выявления возможных нарушений совместимости, включая изменение критичных полей, удаление объектов или нарушение последовательности.



Многоуровневая валидация обеспечивает раннее выявление ошибок и предотвращает попадание некорректных данных в систему.



4. Предиктивный анализ целостности



До момента формирования снимка версии выполняется предиктивный анализ целостности. На этом этапе система анализирует данные с целью обнаружения аномалий, которые потенциально могут привести к нарушению связности данных в будущем.



Предиктивный анализ включает:

— выявление недостаточных или неполных объектов;

— обнаружение подозрительных изменений структуры;

— анализ цепочек идентификаторов;

— поиск аномальных значений;

— проверку межобъектных зависимостей.



Если на этом этапе обнаруживаются потенциальные проблемы, система фиксирует их в отчёте, позволяя предотвратить формирование некорректного снимка состояния.



5. Формирование снимка состояния данных (snapshot)



При успешном прохождении валидации и предиктивного анализа система формирует снимок состояния данных.



Снимок включает:

— полный набор структурированных объектов в машинном формате;

— вспомогательные метаданные версии;

— контрольные суммы;

— ссылку на предыдущую версию данных;

— временную метку формирования.



Снимок сохраняется в отдельную область хранения, что обеспечивает воспроизводимость состояния системы в любой момент времени.



6. Вычисление отличий между версиями данных (diff)



Следующим этапом является вычисление структурных отличий между текущим снимком и предыдущим.



Отличия включают:

— добавленные объекты;

— удалённые объекты;

— изменённые объекты;

— потенциальные нарушения обратной совместимости;

— изменения контракта данных.



Дифференциальная информация представляется как в машинном виде, пригодном для последующей автоматизированной обработки, так и в человекочитаемом формате.



7. Формирование журнала изменений (changelog)



На основе diff данных система формирует журнал изменений.



Журнал содержит:

— список изменений;

— типы изменений;

— краткое описание обновлений;

— версии до и после;

— отметки времени.



Этот журнал предназначен как для разработчиков, так и для внешних систем, которым требуется отслеживать эволюцию данных.



8. Восстановительные операции (Recovery Layer)



Система включает модуль восстановления состояния.



Модуль поддерживает:

— откат к предыдущему снимку;

— восстановление данных при повреждениях;

— анализ целостности предыдущих снимков;

— формирование рекомендаций по восстановлению.



Восстановление выполняется в строго контролируемой среде, что предотвращает дальнейшее повреждение данных.



9. Ведение распределённого состояния



При работе в распределённой среде система поддерживает согласованность между несколькими экземплярами.



Для этого реализованы:

— механизм выбора ведущего узла;

— система heartbeat для мониторинга активности;

— журналирование межузловых операций;

— механизм блокировок;

— обнаружение и разрешение конфликтов;

— синхронизация версий данных.



Это обеспечивает корректную работу способа в масштабируемых и отказоустойчивых конфигурациях.



10. Экспорт согласованных данных



После завершения всех операций система предоставляет актуальный набор данных внешним потребителям в виде API.



Данные экспортируются в соответствии с контрактами данных и содержат только валидированные, устойчивые и воспроизводимые структуры, соответствующие последнему снимку состояния.

